<!DOCTYPE html PUBLIC>
<html lang="en">
  <body>
    <script type="text/javascript" src="bundle.js"></script>
    <script>
      var confObj = {
        signalingService: {
          host: 'localhost',
          port: 9990
        },
        gossipAlgos: {
          cyclon1: {
            class: 'Cyclon',
            viewSize: 8,
            fanout: 4,
            gossipPeriod: 8000,
            propagationPolicy: { push: true, pull: true }
          },
          vicinity1: {
            class: 'Vicinity',
            viewSize: 8,
            fanout: 4,
            gossipPeriod: 8000,
            propagationPolicy: { push: true, pull: true },
            selectionPolicy: 'biased', // random OR biased OR agr-biased
            // implementation of the cosine similarity
            // it is considered that: a.length = b.length
            similarityFunction: function (a, b) {
              var a1 = []
              var b1 = []
              var i
              var tmpA
              var tmpB
              var sumA = 0
              var sumB = 0
              for (i = 0; i < a.length; i++) {
                tmpA = a[i] !== 'undefined' ? 1 : 0
                tmpB = b[i] !== 'undefined' ? 1 : 0
                a1.push(tmpA)
                b1.push(tmpB)
                sumA += tmpA
                sumB += tmpB
              }
              if (sumA === 0) { for (i = 0; i < a.length; i++) { a1[i] = 1 } }
              if (sumB === 0) { for (i = 0; i < a.length; i++) { b1[i] = 1 } }
              var prSum = 0
              var aSqrtSum = 0
              var bSqrtSum = 0
              for (i = 0; i < a1.length; i++) {
                prSum += a1[i] * b1[i]
                aSqrtSum += a1[i] * a1[i]
                bSqrtSum += b1[i] * b1[i]
              }
              var r = prSum / (Math.sqrt(aSqrtSum) * Math.sqrt(bSqrtSum))
              return r
            },
            dependencies: [
              { algoId: 'cyclon1', algoAttribute: 'view' }
            ]
          }
        },
        userImplementations: [],
        statsOpts: {
          activated: false,
          feedbackPeriod: 20000
        },
        usingSs: true
      }
      var peerId = '#userId'
      var profile = #userProfile
      var coordinator = new Coordinator(confObj, peerId, profile)
      coordinator.bootstrap()
    </script>
  </body>
</html>
