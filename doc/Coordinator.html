<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Coordinator</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Class: Coordinator</h1>
    
    



<section>
    
<header>
    <h2>
    Coordinator
    </h2>
    
</header>  

<article>
    <div class="container-overview">
    
    
    
        
<dt>
    <h4 class="name" id="Coordinator"><span class="type-signature"></span>new Coordinator<span class="signature">(opts, profile, peerId)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        This class coordinates the execution of a set of gossip-based protocols. The
protocols are described in a configuration object (see 
configurationObj). In order to avoid 
reinventing the wheel, Coordinator extends the <a href="http://peerjs.com/">Peer</a> class from PeerJS 
(which provides a WebRTC wrapper with P2P communication functionalities like: send/receive
functions, serialization of objects, management of media and data connections, etc)
and manages every external connection with other peers. Moreover, this class acts as
an intermediary between any web application and the 
GossipMediator class to decide what to do with
gossip messages; for instance, if one gossip algorithm needs to a send message M to peer
P then the Coordinator is going to receive M (via the GossipMediator) to initiate what
it is necessarily for the connection (looking for a method for reaching P; here there are two
possible cases to reach P, either the Coordinator contacts the 
<a href="https://github.com/peers/peerjs-server">brokering server</a> or the Coordinator uses the
LookupService) and in that way sending M to P.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>opts</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Property "peerJsOpts" of the configuration object (see 
configurationObj for more details)</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>profile</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">The content of a user's profile is application dependant, besides an especial
format is required for this object. The properties of the object must coincide with the 
algorithms identifiers in the property "gossipAlgos" in 
configurationObj</td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>peerId</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Unique identifier of the peer, if this parameter is not specified one
random peerId will be created by the <a href="https://github.com/peers/peerjs-server">brokering server</a></td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li><a href="mailto:raziel.carvajal@gmail.com">Raziel Carvajal-Gomez</a></li>
        </ul>
    </dd>
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line4">line 4</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

    
    </div>
    
    
        <h3 class="subsection-title">Extends</h3>
        
        <ul>
            <li>Peer</li>
        </ul>
    
    
    
    
    
    
    
    
    
    
    
    
    
        <h3 class="subsection-title">Methods</h3>
        
        <dl>
            
<dt>
    <h4 class="name" id="checkConfFile"><span class="type-signature">&lt;static> </span>checkConfFile<span class="signature">(confObj)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        The evaluation for knowing if the 
configuration file is well structured is performed
by this method
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>confObj</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Configuration object</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line141">line 141</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="createAlgorithms"><span class="type-signature">&lt;static> </span>createAlgorithms<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Method in charge of the initialization of objects which implements every
gossip protocol specified in the configuration file.
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line117">line 117</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="emptyHistoryOfLogs"><span class="type-signature">&lt;static> </span>emptyHistoryOfLogs<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Once this method is called every key of the objects "vieUpdHistory" and "actCycHistory"
points to an empty object
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line250">line 250</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="getActiCycHistory"><span class="type-signature">&lt;static> </span>getActiCycHistory<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Get statistics about to which extend the gossip cycle is updated on
each algorithm
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line242">line 242</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    Object Keys in this object correspond to the number each gossip cycle
</div>



        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="getViewUpdHistory"><span class="type-signature">&lt;static> </span>getViewUpdHistory<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Get statistics about to which extend the view of algorithms is updated
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line235">line 235</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    Object Keys in this object correspond to the number of each gossip cycle
</div>



        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="handleConnection"><span class="type-signature">&lt;static> </span>handleConnection<span class="signature">(connection)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Once one connection is established among two peers this method is called
to set the events to trigger in case of error in the connection, data 
reception and when the connection is ready to send messages. Additionally, when the
connection is open and if the function "appFn" was set then that function is
called.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>connection</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Connection among two peers</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line347">line 347</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="handleIncomingData"><span class="type-signature">&lt;static> </span>handleIncomingData<span class="signature">(data)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Every message received by peers contains one header to differentiate its payload,
this method handles the reception of messages according to the next two headers: gossip and
lookup. The latter serves to discover peers in the overlay and the former contains what it is
exchanged by each gossip protocol (normally, the view of each peer).
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>data</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Message exchange between two peers</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line379">line 379</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="listen"><span class="type-signature">&lt;static> </span>listen<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Basically, this method instantiates: i) the <a href="http://peerjs.com/docs/#api">Peer</a> 
object, ii) the LookupService (if it is
specified in the configuration object) and iii) every implementation of the gossip algorithms. In point
iii one <a href="http://www.w3schools.com/html/html5_webworkers.asp">web worker</a> environment is created
per algorithm with an instance of a GossipMediator too.
Additionally, events of [Peer]{@link http://peerjs.com/docs/#api} are set to receive messages of
external peers.
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line68">line 68</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="sendViaLookupService"><span class="type-signature">&lt;static> </span>sendViaLookupService<span class="signature">(msg)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Send a message to peer msg.receiver via one connection created by the 
LookupService. Basically, msg.receiver will be found
among the actual connections in the overlay with the forwarding of lookup messages. When the 
connection is open, the message msg will be sent to the receiver.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>msg</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Payload to send</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line299">line 299</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="sendViaSigServer"><span class="type-signature">&lt;static> </span>sendViaSigServer<span class="signature">(msg)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        Send a message to peer msg.receiver via one connection created with the help of the
brokering server, i. e., the emitter of the message will exchange information with the receiver
through the brokering server to perform a data connection between both peers; once the connection
is open, the message msg will be sent to the receiver.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>msg</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Payload to send</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line268">line 268</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    connection Reference to the connection established by two peers via the brokering server
</div>



        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="setApplicationLevelFunction"><span class="type-signature">&lt;static> </span>setApplicationLevelFunction<span class="signature">(fn)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        This method sets one function external to WebGC that normally belongs to the
application layer.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>fn</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Reference to an external function</td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line412">line 412</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="setWorkerEvents"><span class="type-signature">&lt;static> </span>setWorkerEvents<span class="signature">(worker)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        This method sets the event "message" of a web worker for handling any message exchange
in WebGC. These are the possible message exchanges: i) from the 
Coordinator to an external peer, ii) from one worker to another one via the Coordinator and iii) from
the Coordinator to a web application
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>worker</code></td>
            
            
            <td class="type">
            
            </td>
            
            
            
            
            
            <td class="description last">Reference to a <a href="http://www.w3schools.com/html/html5_webworkers.asp">web worker</a></td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
<dl class="details">
    
        
    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Coordinator.js.html">controllers/Coordinator.js</a>, <a href="Coordinator.js.html#line167">line 167</a>
    </li></ul></dd>
    
    
    
    
    
    
    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        </dl>
    
    
    
    
    
</article>

</section>  




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="algorithms.html">src/algorithms</a></li><li><a href="confObjs.html">src/confObjs</a></li><li><a href="controllers.html">src/controllers</a></li><li><a href="services.html">src/services</a></li><li><a href="superObjs.html">src/superObjs</a></li><li><a href="utils.html">src/utils</a></li></ul><h3>Classes</h3><ul><li><a href="Bootstrap.html">Bootstrap</a></li><li><a href="Coordinator.html">Coordinator</a></li><li><a href="Cyclon.html">Cyclon</a></li><li><a href="GossipFactory.html">GossipFactory</a></li><li><a href="GossipMediator.html">GossipMediator</a></li><li><a href="GossipProtocol.html">GossipProtocol</a></li><li><a href="GossipUtil.html">GossipUtil</a></li><li><a href="Logger.html">Logger</a></li><li><a href="LookupService.html">LookupService</a></li><li><a href="Plotter.html">Plotter</a></li><li><a href="SamplingService.html">SamplingService</a></li><li><a href="Vicinity.html">Vicinity</a></li><li><a href="ViewSelector.html">ViewSelector</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:connection">connection</a></li><li><a href="global.html#event:open">open</a></li></ul><h3>Global</h3><ul><li><a href="global.html#configurationObj">configurationObj</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Tue Jun 09 2015 10:37:13 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>